<!DOCTYPE html>
<html>
    <head><title>Terminal Sample</title></head>
    <body>
        <!--Include the retrolib web bundle.-->
        <script src="../../../dist/retrolib.js"></script>
        <script>
            retrolib.setCanvasBackground('black')
            retrolib.initialize('gamecanvas', 720, 400, true, true)
            let ctx = retrolib.gameCanvas.getContext('2d')
            
            
            retrolib.terminal.Initialize()

            retrolib.map.Initialize(60, 19)
            const block = { name: 'block', group: 'block', colors: [{ r: 255, g: 255, b: 255, a: 255}], bgColor: null, characters: ['â–“'], blockVision: true, blockMovement: true }
            retrolib.map.setCell(8, 8, block)
            retrolib.map.setCell(9, 8, block)

            //let cells = retrolib.map.getCells((f => true)) // Return all cells in the map.
            let cells = retrolib.map.fov(7, 8, 8)
            console.log('cells', cells)
            cells.forEach((mapCell) => {
                retrolib.terminal.setCell(mapCell.x, mapCell.y,
                    mapCell.cellType.characters[retrolib.random.randInt(0, mapCell.cellType.characters.length)],
                    mapCell.cellType.colors[retrolib.random.randInt(0, mapCell.cellType.colors.length)],
                    mapCell.cellType.bgColor)
            })

            retrolib.terminal.setCell(7, 7, '@', { r: 255, g: 255, b: 0, a: 255 }, { r: 0, g: 0, b: 255, a: 255 })
            
            retrolib.scenes.addScene(new retrolib.Scene('hello world', (delta) => {
                retrolib.terminal.Draw()
            }, true))

        </script>
    </body>
</html>