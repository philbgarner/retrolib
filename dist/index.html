<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>retrolib</title>
		<style>
			body { margin: 0; }

			canvas {
				height: 100%;
				image-rendering: pixelated;
				background-color: black;
			}

			body {
				overflow: hidden;
				margin: 0;
				padding: 0;
				background-color: black;
				text-align: center;
			}
		</style>
		<script src="./retrolib.js"></script>
		<!-- <script>
			var gameActivated = false
			var moveAmt = 1
			var loadError = false
			var isLoading = true
			var loadErrorMessage = ''

			input.pressed('moveUp', () => game.scenes.handleInput('up', moveAmt))
			input.released('moveUp', () => game.scenes.handleInput('up', 0))
			input.pressed('moveRight', () => game.scenes.handleInput('right', moveAmt))
			input.released('moveRight', () => game.scenes.handleInput('right', 0))
			input.pressed('moveDown', () => game.scenes.handleInput('down', moveAmt))
			input.released('moveDown', () => game.scenes.handleInput('down', 0))
			input.pressed('moveLeft', () => game.scenes.handleInput('left', moveAmt))
			input.released('moveLeft', () => game.scenes.handleInput('left', 0))

			input.pressed('cancel', () => game.scenes.handleInput('cancel', true))
			input.released('cancel', () => game.scenes.handleInput('cancel', false, true))

			input.pressed('attack', () => game.scenes.handleInput('attack', true))
			input.released('attack', () => game.scenes.handleInput('attack', false))
			// input.pressed('suction', () => game.HandleInput('suction', true))
			// input.released('suction', () => game.HandleInput('suction', false))

			input.listen()

			function resize() {
				let canvasWidth = window.innerHeight > window.innerWidth ? window.innerWidth : window.innerHeight
				gamecanvas.style.display = 'block'
				gamecanvas.style.position = 'absolute'
				gamecanvas.style.width = canvasWidth + 'px'
				gamecanvas.style.height = canvasWidth + 'px'
				gamecanvas.style.top = window.innerHeight / 2 - canvasWidth / 2  + 'px'
				gamecanvas.style.left = window.innerWidth / 2 - canvasWidth / 2 + 'px'
				gamecanvas.style.background = 'transparent'
			}

			async function start() {
				var gamecanvas = document.createElement('canvas')
				gamecanvas.id = 'gamecanvas'
				document.body.prepend(gamecanvas)
				ctx = gamecanvas.getContext('2d')
				gamecanvas.width = 200 //256
				gamecanvas.height = 187 //240

				addEventListener('resize', () => resize())
				resize()

				game.LoadMedia(gamecanvas)
						.catch((err) => {
							console.log('load media failed', err)
							loadError = true
							loadErrorMessage = err
						})
						.then(() => {
							game.PrepareLevel('level1')
							isLoading = false
							//game.playSong('track8')
						})

				function onGameActivate(e) {
					if (!isLoading) {
						gameActivated = true
						game.Start()
					}

					gamecanvas.removeEventListener('click', onGameActivate)
				}
				gamecanvas.addEventListener('click', onGameActivate)
				//onGameActivate()

				function animationFrame() {
					ctx.clearRect(0, 0, gamecanvas.width, gamecanvas.height)
					window.requestAnimationFrame(animationFrame)
					if (!loadError) {
						let message = isLoading ? 'Loading...' : 'Click to Begin'
						let width = bfontjs.CalculateTextWidth(message, eighties)
						let height = bfontjs.CalculateTextHeight(message, eighties)
						bfontjs.DrawText(ctx, parseInt(gamecanvas.width / 2 - width / 2), parseInt(gamecanvas.height / 2 - height / 2), message, '#f1f10aff', eighties, { gradient: { colour: '#090909ff' } })
					} else {
						
						console.log('loadError', loadError, loadErrorMessage)
						bfontjs.DrawText(ctx, 0, 0, 'Load Error:\n' + loadErrorMessage, '#f10a0aff', eighties)
					}
				}
				window.requestAnimationFrame(animationFrame)
			} -->
		<!-- </script> -->
	</head>
	<body>
	</body>
</html>